<div
  class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-40"
  (click)="closeModal($event)"
>
 <!-- modal content -->
  <div
    class="bg-white rounded-lg shadow-md p-8 w-[86%] sm:w-3/5 md:w-2/4"
    (click)="stopPropagation($event)"
  >
    <!-- modal header -->
    <div
      class="flex justify-between items-center pb-4 border-b border-gray-200"
    >
      <h5 class="text-xl font-bold text-gray-800">Add Course</h5>
      <button
        type="button"
        class="text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
        (click)="closeModal($event)"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>
    </div>
    <!-- modal form -->
    <form [formGroup]="courseForm">
      <div class="mb-4">
        <label for="courseName" class="block text-sm font-medium text-gray-700"
          >Course Name</label
        >
        <input
          type="text"
          class="w-full px-3 placeholder:italic py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500"
          id="courseName"
          name="name"
          formControlName="name"
          placeholder="enter course name"
          required
        />
        @if(courseForm.get('name')?.hasError('nameError') && courseForm.get('name')?.touched){
          <small class="text-red-600">course name must contain only alphabets</small>
        }
      </div>
      <div class="mb-4">
        <label for="courseCode" class="block text-sm font-medium text-gray-700"
          >Course Code</label
        >
        <input
          type="text"
          class="w-full placeholder:italic px-3 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500"
          id="courseCode"
          name="code"
          formControlName="code"
          placeholder="e.g MTH110"
          required
        />
        @if(courseForm.get('code')?.hasError('codeError') && courseForm.get('code')?.touched){
          <small class="text-red-600">course code can contain only numbers, alphabets, hyphen, or underscore</small>
        }
      </div>
      <div class="mb-4">
        <label for="courseScore" class="block text-sm font-medium text-gray-700"
          >Course Score</label
        >
        <input
          type="number"
          class="w-full placeholder:italic px-3 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500"
          id="courseScore"
          name="score"
          placeholder="e.g 65"
          formControlName="score"
          required
        />
          @if(courseForm.get('score')?.hasError('typeError') && courseForm.get('score')?.touched){
          <small class="text-red-600">must be a number</small>
        }@else if (courseForm.get('score')?.hasError('rangeError') && courseForm.get('score')?.touched) {
          <small class="text-red-600">score must be between 0 and 100</small>
        }
      </div>
      <div class="mb-4">
        <label for="courseUnit" class="block text-sm font-medium text-gray-700"
          >Course Unit</label
        >
        <input
          type="number"
          class="w-full placeholder:italic px-3 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-1 focus:ring-indigo-500"
          id="courseUnit"
          placeholder="e.g 3"
          name="unit"
         formControlName="unit"
          required
        />
          @if(courseForm.get('unit')?.hasError('typeError') && courseForm.get('unit')?.touched){
          <small class="text-red-600">must be a number</small>
        }
      </div>
    </form>
    <!-- modal footer -->
    <div class="flex justify-end space-x-2">
      <button
        type="button"
        class="text-gray-500 px-2 sm:px-4 py-1 sm:py-2 rounded-md border border-gray-300 hover:bg-gray-100 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
        (click)="closeModal($event)"
      >
        Close
      </button>
      <button
        type="button"
        class="bg-indigo-500 text-white px-2 sm:px-4 py-1 sm:py-2 rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
        (click)="submitCourse($event)"
        [ngClass]="{'opacity-55 hover:bg-indigo-500': !courseForm.valid}"
        [disabled]="!courseForm.valid"
      >
        Add Course
      </button>
    </div>
  </div>
</div>
